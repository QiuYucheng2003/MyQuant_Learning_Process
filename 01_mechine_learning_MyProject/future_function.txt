1. 在GP挖掘因子的阶段，非常容易发生未来函数的问题：
1.1：
代码中，使用了未来5日的收益以及未来5日的收益率排名：
df['RET_FWD_5'] = df.groupby('code')['close'].shift(-Target_period) / df['close'] - 1
但为什么是安全的:因为RET_FWD_5这一列被用做了label，而不是feature特征;
【就是说，涉及到未来数据的这个信息，被当做label了，而不是作特征用于训练】
机器学习就是要学习特征，然后不断地去逼近这个label;

1.2:
有没有涉及到未来数据、未来函数，要看我们的输入特征(feature)
feature只能使用当天以及过去的数据，而不能使用未来的数据;

1.3:
在进行preprocess_factors的时候，对数据进行Winsorize和Z-score
使用了 groupby('date') 来进行 Winsorize 和 Z-Score。
意味着在计算 2022年1月1日 的均值和标准差时，你的代码只看得到 2022年1月1日这一天所有股票的数据；
完全看不到 1月2日的数据。这是标准的截面标准化 (Cross-sectional Normalization)。安全。


1.4:发现一个数据泄露的部分：
# 你的代码
df = df.sort_values(['code', 'date']).reset_index(drop=True) # 1. 按股票代码排序
split_idx = int(len(df) * 0.7) # 2. 切前70%
X_train = full_X.iloc[:split_idx] # 3. 训练集
解读：我这里按照股票去切分了，但是应该用时间去切分，不然的话，模型知道后面的时序中发生的事情；
修改：将GP_Dig_Factor函数中的逻辑用日期去修改；

1.5 数据处理的时候：
要记得去量纲，特别是价格部分，有些股票差距非常大，要使用量纲！
如果不去除量纲，那么GP挖掘出来的因子中，大概率会与之纠缠,因子中会大量出现未取出量纲的X，它会让因子的意义完全坍塌；
要喂给GP纯净的、全比率的特征矩阵，挖掘出来的因子将不再受股价高低的影响。